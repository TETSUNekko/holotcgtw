# ä½¿ç”¨ Puppeteer å®˜æ–¹æ˜ åƒä½œç‚ºåŸºç¤
FROM ghcr.io/puppeteer/puppeteer:latest

# è¨­å®šå·¥ä½œç›®éŒ„
WORKDIR /app

# è¤‡è£½ package æª”æ¡ˆ
COPY package*.json ./

# ğŸ”§ ä¿®æ­£æ¬Šé™ï¼Œé¿å… EACCES éŒ¯èª¤
USER root
RUN chown -R pptruser:pptruser /app

# ğŸ”½ åˆ‡æ›å› puppeteer çš„ä½¿ç”¨è€…
USER pptruser

# å®‰è£ä¾è³´
RUN npm install

# è¤‡è£½å‰©ä¸‹çš„å°ˆæ¡ˆæª”æ¡ˆ
COPY . .

# é–‹æ”¾åŸ 
EXPOSE 3001

# å•Ÿå‹•æŒ‡ä»¤
CMD ["node", "server.js"]
